# This is the ProFTPD configuration file
# See: http://www.proftpd.org
# See: http://www.proftpd.org/docs/howto/index.html
# See: http://www.proftpd.org/docs/directives/linked/by-name.html
# Server Config - config used for anything outside a <VirtualHost> or <Global> context

ServerName 				"MY OWN SRV.L1"
ServerIdent 			on "FTP Server ready."
ServerAdmin 			root@localhost
ServerType 				standalone
DefaultServer 			on
#MultilineRFC2228 		on
#ShowSymlinks 			off
#DefaultTransferMode 	binary

TimeoutLogin 		120
TimeoutIdle 		300
TimeoutNoTransfer 	180
TimeoutStalled 		300


# Port 21 is the standard FTP port.
#Port 7897
Port 21

# In some cases you have to specify passive ports range to by-pass
# firewall limitations. Ephemeral ports can be used for that, but
# feel free to use a more narrow range.  
PassivePorts 6510 6525  

# If your host was NATted, this option is useful in order to
# allow passive tranfers to work. You have to use your public
# address and opening the passive ports used on your firewall as well.
MasqueradeAddress 1.2.3.4

# This is useful for masquerading address with dynamic IPs:
# refresh any configured MasqueradeAddress directives every 8 hours
#<IfModule mod_dynmasq.c>
# DynMasqRefresh 28800
#</IfModule>

# Use PAM (Pluggable Authentication Modules) to authenticate (default) and be authoritative
# The AuthPAMConfig directive is used to specify the name of the service used when performing the PAM check
# See: http://www.proftpd.org/docs/modules/mod_auth_pam.html 

<IfModule mod_auth_pam.c>
	AuthPAM   on
	AuthPAMConfig   proftpd
	AuthPAMOptions   NoTTY
</IfModule>

# It is important that mod_auth_pam appear before mod_auth_unix, and
# that the asterisk ("*") appear after the name, not before.
# The asterisk after a module name in the AuthOrder directive 
# is what tells proftpd to treat that module's results as authoritative.
#AuthOrder   mod_auth_unix.c
AuthOrder   mod_auth_pam.c* mod_auth_unix.c

# The PersistentPasswd directive controls how mod_auth_unix handles authentication,
# user/group lookups, and user/group to name mapping.
# See: http://www.proftpd.org/docs/modules/mod_auth_unix.html
# If you use NIS/YP/LDAP you may need to disable PersistentPasswd
PersistentPasswd   off

# Don't do reverse DNS lookups (hangs on DNS problems)
UseReverseDNS   off

# Umask 022 is a good standard umask to prevent new dirs and files
# from being group and world writable.
Umask   022

# To prevent DoS attacks, set the maximum number of child processes
# to 20.  If you need to allow more than 20 concurrent connections
# at once, simply increase this value.  Note that this ONLY works
# in standalone mode; in inetd mode you should use an inetd server
# that allows you to limit maximum number of processes per service
# (such as xinetd)
MaxInstances   8

# Set the user and group under which the server will run.
# Never ever run as root

User   nobody
Group  nobody

# To really apply changes reload proftpd after modifications.
AllowOverwrite on
AuthAliasOnly on

# Choose here the user alias you want !!!!
# example: UserAlias user_name_for_login user_created_for_ftp_only
UserAlias tedftp useraz

<Limit LOGIN>
	AllowUser tedftp
	DenyALL
</Limit>

# Normally, we want files to be overwriteable.
<Directory /home/MyCloud_Files>
Umask 022 022
AllowOverwrite on
  <Limit All>
	AllowAll
  </Limit>
</Directory>
</IfModule>

#<Directory /home/MyCloud_Files/*>
#Umask 022 022
#AllowOverwrite on
#	<Limit READ RMD DELE>
#		DenyAll
#	</Limit>
#
#	<Limit STOR CWD MKD>
#		AllowAll
#	</Limit>
#</Directory>

# You can have a separate file from the regular /etc/passwd
# The "mod_auth_file" module is compiled by default
# See: http://www.proftpd.org/docs/modules/mod_auth_file.html 
#AuthUserFile   /etc/proftpd/auth/users.passwd
#AuthGroupFile  /etc/proftpd/auth/users.group

# To cause every FTP user to be "jailed" (chrooted) into their home
# directory, uncomment this line.
#DefaultRoot   ~ !adm
DefaultRoot   /home/MyCloud_Files
DefaultRoot   ~

# Define the log formats
LogFormat     default "%h %l %u %t \"%r\" %s %b"
LogFormat     auth "%v [%P] %h %t \"%r\" %s"
LogFormat     write "%h %l %u %t \"%r\" %s %b"
# If "WtmpLog" is "on" every loged user will record in /var/log/wtmp file
# and if you write in console "w" command this ftp user will shown there. 
WtmpLog   off

# TLS (http://www.castaglia.org/proftpd/modules/mod_tls.html)
<IfModule mod_tls.c>
	TLSEngine 		on
	TLSProtocol 	SSLv23
	TLSRequired 	on
	TLSRSACertificateFile 		/etc/proftpd/ssl/proftpd.cert.pem
	TLSRSACertificateKeyFile 	/etc/proftpd/ssl/proftpd.key.pem
	TLSCipherSuite 		ALL:!ADH:!DES
	TLSOptions 			NoCertRequest
	TLSVerifyClient 	off
	#TLSRenegotiate 	ctrl 3600 data 512000 required off timeout 300
	TLSLog 				/var/log/proftpd/tls.log
	<IfModule mod_tls_shmcache.c>
		TLSSessionCache 	shm:/file=/var/run/proftpd/sesscache
	</IfModule>
</IfModule>

# Dynamic ban lists (http://www.proftpd.org/docs/contrib/mod_ban.html)
# Enable this with PROFTPD_OPTIONS=-DDYNAMIC_BAN_LISTS in /etc/sysconfig/proftpd
#<IfDefine DYNAMIC_BAN_LISTS>
#  LoadModule			mod_ban.c
#  BanEngine			on
#  BanLog			/var/log/proftpd/ban.log
#  BanTable			/var/run/proftpd/ban.tab
#
#  # If the same client reaches the MaxLoginAttempts limit 2 times
#  # within 10 minutes, automatically add a ban for that client that
#  # will expire after one hour.
#  BanOnEvent			MaxLoginAttempts 2/00:10:00 01:00:00
#
#  # Allow the FTP admin to manually add/remove bans
#  BanControlsACLs		all allow user ftpadm
#</IfDefine>

#######################################################################
# Global Config                                                       #
#######################################################################
# Global Config - config common to Server Config and all virtual hosts
<Global>

# Display a message after a successful login
	AccessGrantMsg 		/etc/proftpd/welcome.msg
	#DisplayLogin 		/etc/proftpd/welcome.msg
	AccessDenyMsg 		"404 Access for %u has been denied.
# Record all logins
	#ExtendedLog 		/var/log/proftpd/auth.log AUTH auth
#
# Paranoia logging level....
	ExtendedLog 		/var/log/proftpd/paranoid.log ALL default
#
# Disable sendfile by default since it breaks displaying the download speeds in
# ftptop and ftpwho
	UseSendfile 		off
#
	RequireValidShell 	off
# If you don't choose to use /etc/ftpusers file (set inside the users you want to ban)
# set this option to "off"  
	UseFtpUsers 		off 
	RootLogin 			off   
	MaxLoginAttempts 	3
	MaxClients 			8
	MaxClientsPerHost 	8
	MaxClientsPerUser 	8
	MaxHostsPerUser 	8
#	
	#DenyFilter 		\*.*/
# Allow to restart a download  
	AllowStoreRestart 		on
	#AllowRetrieveRestart 	on
	#AllowForeignAddress 	on
	#DirFakeGroup 			on   ~ 
	#DirFakeUser 			on   ~ 
	#DirFakeMode 			0440 
	#HiddenStor 			on
  
# Allow users to overwrite files and change permissions
#AllowOverwrite   yes
#<Limit ALL SITE_CHMOD>
#  AllowAll
#</Limit>

# VALID LOGINS
#<Limit LOGIN>
#   AllowUser someUser
#   DenyALL
#</Limit>

</Global>

#######################################################################
# SIMPE ANONYMOUS LOGIN                                               #
#######################################################################
#<Anonymous /home/MyCloud_Files>
#AnonRequirePassword   on
#AuthAliasOnly         on
#AuthUsingAlias        on
#RequireValidShell     off
# The list of authorized users.
# user/pass lookup is for each user, not password entry
# of server uid ('nobody' in this example).
#UserAlias             tedftp       useraz
#<Limit ALL>
#AllowAll
#</Limit>
#</Anonymous>

# Dynamic Shared Object (DSO) loading
# See README.DSO and howto/DSO.html for more details
#
# General database support (http://www.proftpd.org/docs/contrib/mod_sql.html)
#   LoadModule mod_sql.c
#
# Support for base-64 or hex encoded MD5 and SHA1 passwords from SQL tables
# (contrib/mod_sql_passwd.html)
#   LoadModule mod_sql_passwd.c
#
# Mysql support (requires proftpd-mysql package)
# (http://www.proftpd.org/docs/contrib/mod_sql.html)
#   LoadModule mod_sql_mysql.c
#
# Postgresql support (requires proftpd-postgresql package)
# (http://www.proftpd.org/docs/contrib/mod_sql.html)
#   LoadModule mod_sql_postgres.c
#
# Quota support (http://www.proftpd.org/docs/contrib/mod_quotatab.html)
#   LoadModule mod_quotatab.c
#
# File-specific "driver" for storing quota table information in files
# (http://www.proftpd.org/docs/contrib/mod_quotatab_file.html)
#   LoadModule mod_quotatab_file.c
#
# SQL database "driver" for storing quota table information in SQL tables
# (http://www.proftpd.org/docs/contrib/mod_quotatab_sql.html)
#   LoadModule mod_quotatab_sql.c
#
# LDAP support (requires proftpd-ldap package)
# (http://www.proftpd.org/docs/directives/linked/config_ref_mod_ldap.html)
#   LoadModule mod_ldap.c
#
# LDAP quota support (requires proftpd-ldap package)
# (http://www.proftpd.org/docs/contrib/mod_quotatab_ldap.html)
#   LoadModule mod_quotatab_ldap.c
#
# Support for authenticating users using the RADIUS protocol
# (http://www.proftpd.org/docs/contrib/mod_radius.html)
#   LoadModule mod_radius.c
#
# Retrieve quota limit table information from a RADIUS server
# (http://www.proftpd.org/docs/contrib/mod_quotatab_radius.html)
#   LoadModule mod_quotatab_radius.c
#
# Administrative control actions for the ftpdctl program
# (http://www.proftpd.org/docs/contrib/mod_ctrls_admin.html)
#   LoadModule mod_ctrls_admin.c
#
# Execute external programs or scripts at various points in the process
# of handling FTP commands
# (http://www.castaglia.org/proftpd/modules/mod_exec.html)
#   LoadModule mod_exec.c
#
# Support for POSIX ACLs
# (http://www.proftpd.org/docs/modules/mod_facl.html)
#   LoadModule mod_facl.c
#
# Support for using the GeoIP library to look up geographical information on
# the connecting client and using that to set access controls for the server
# (http://www.castaglia.org/proftpd/modules/mod_geoip.html)
#   LoadModule mod_geoip.c
#
# Configure server availability based on system load
# (http://www.proftpd.org/docs/contrib/mod_load.html)
#   LoadModule mod_load.c
#
# Limit downloads to a multiple of upload volume (see README.ratio)
#   LoadModule mod_ratio.c
#
# Rewrite FTP commands sent by clients on-the-fly,
# using regular expression matching and substitution 
# (http://www.proftpd.org/docs/contrib/mod_rewrite.html)
#   LoadModule mod_rewrite.c
#
# Support for the SSH2, SFTP, and SCP protocols, for secure file transfer over
# an SSH2 connection (http://www.castaglia.org/proftpd/modules/mod_sftp.html)
#   LoadModule mod_sftp.c
#
# Use PAM to provide a 'keyboard-interactive' SSH2 authentication method for
# mod_sftp (http://www.castaglia.org/proftpd/modules/mod_sftp_pam.html)
#   LoadModule mod_sftp_pam.c
#
# Use SQL (via mod_sql) for looking up authorized SSH2 public keys for user
# and host based authentication
# (http://www.castaglia.org/proftpd/modules/mod_sftp_sql.html)
#   LoadModule mod_sftp_sql.c
#
# Provide data transfer rate "shaping" across the entire server
# (http://www.castaglia.org/proftpd/modules/mod_shaper.html)
#   LoadModule mod_shaper.c
#
# Support for miscellaneous SITE commands such as SITE MKDIR, SITE SYMLINK,
# and SITE UTIME (http://www.proftpd.org/docs/contrib/mod_site_misc.html)
#   LoadModule mod_site_misc.c
#
# Provide an external SSL session cache using shared memory
# (contrib/mod_tls_shmcache.html)
#   LoadModule mod_tls_shmcache.c
#
# Use the /etc/hosts.allow and /etc/hosts.deny files, or other allow/deny
# files, for IP-based access control
# (http://www.proftpd.org/docs/contrib/mod_wrap.html)
#   LoadModule mod_wrap.c
#
# Use the /etc/hosts.allow and /etc/hosts.deny files, or other allow/deny
# files, as well as SQL-based access rules, for IP-based access control
# (http://www.proftpd.org/docs/contrib/mod_wrap2.html)
#   LoadModule mod_wrap2.c
#
# Support module for mod_wrap2 that handles access rules stored in specially
# formatted files on disk
# (http://www.proftpd.org/docs/contrib/mod_wrap2_file.html)
#   LoadModule mod_wrap2_file.c
#
# Support module for mod_wrap2 that handles access rules stored in SQL
# database tables (http://www.proftpd.org/docs/contrib/mod_wrap2_sql.html)
#   LoadModule mod_wrap2_sql.c
#
# Provide a flexible way of specifying that certain configuration directives
# only apply to certain sessions, based on credentials such as connection
# class, user, or group membership
# (http://www.proftpd.org/docs/contrib/mod_ifsession.html)
#   LoadModule mod_ifsession.c
